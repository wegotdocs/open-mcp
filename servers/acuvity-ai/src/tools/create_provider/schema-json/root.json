{
  "type": "object",
  "properties": {
    "ID": {
      "description": "ID is the identifier of the object.",
      "readOnly": true,
      "type": "string"
    },
    "analyzeOutput": {
      "description": "If enabled, run the analysis pipelines on the provider output. No policy will be\napplied, but the response will be analyzed and classified.",
      "type": "boolean"
    },
    "category": {
      "description": "The category of the provider.",
      "enum": [
        "User",
        "App"
      ],
      "example": "User"
    },
    "createTime": {
      "description": "Creation date of the object.",
      "format": "date-time",
      "readOnly": true,
      "type": "string"
    },
    "description": {
      "description": "The description of the provider.",
      "type": "string"
    },
    "errorTransformer": {
      "type": "object",
      "description": "<llm-instruction>This part of the input schema is truncated. If you want to pass the property `errorTransformer` to the tool, first call the tool `expandSchema` with \"/properties/errorTransformer\" in the list of pointers. This will return the expanded input schema which you can then use in the tool call. You may have to call `expandSchema` multiple times if the schema is nested.</llm-instruction>\n<property-description>Used to transform errors before sending them back to the client.</property-description>",
      "additionalProperties": true
    },
    "experimental": {
      "description": "If true, consider this provider as experimental. It will require to use a custom\nPAC Config to make it usable from the proxy.pac.",
      "type": "boolean"
    },
    "extractors": {
      "description": "List of extractors for the provider.",
      "items": {
        "description": "This object allows to either define an extractor for the provider, or to\nreference an existing extractor from database.",
        "properties": {
          "def": {
            "description": "An extractor allows to create a reusable extractor for providers.",
            "properties": {
              "ID": {
                "description": "ID is the identifier of the object.",
                "readOnly": true,
                "type": "string"
              },
              "SSEManagement": {
                "default": "Collect",
                "description": "This property defines how you want the extractor to work with\nserver-side events. With Collect all the events buffer until the server\ncloses the connection and sends the entire data to the lua code\nwhile Stream will collect line by line and will send events line by line.",
                "enum": [
                  "Collect",
                  "Stream"
                ]
              },
              "analyzers": {
                "description": "The analyzers parameter allows for customizing which analyzers should be used,\noverriding the default selection. Each analyzer entry can optionally include a\nprefix to modify its behavior:\n\n  - No prefix: Runs only the specified analyzers and any dependencies required\nfor deeper analyzis (slower but more acurate).\n  - '+' (enable): Activates an analyzer that is disabled by default.\n  - '-' (disable): Disables an analyzer that is enabled by default.\n  - '@' (direct execution): Runs the analyzer immediately, bypassing the deeper\nanalyzis (faster but less acurate).\n\nAn analyzers entry can be specified using:\n  - The analyzer name (e.g., 'Toxicity detector')\n  - The analyzer ID (e.g., 'en-text-toxicity-detector')\n  - The analyzer group (e.g., 'Detectors')\n  - A detector name (e.g., 'toxic')\n  - A detector label (e.g., 'insult')\n  - A detector group (e.g., 'Malcontents')\n\nIf left empty, all default analyzers will be executed.",
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              "anonymization": {
                "default": "FixedSize",
                "description": "How to anonymize the data. If deanonymize is true, then VariablSize is required.",
                "enum": [
                  "FixedSize",
                  "VariableSize"
                ]
              },
              "behavior": {
                "default": "Popup",
                "description": "Defines how to handle error in the case of a webpage. If set to Popup, the error\nwill be shown in a popup. If throw, a javascript error will be returned.",
                "enum": [
                  "Popup",
                  "Throw",
                  "Ignore"
                ]
              },
              "block": {
                "default": "Allow",
                "description": "Block the request to the provider if not Allow. If Before, the data will be\nblocked before running any extraction or analyzis. If After block the request\nafter analysizis.",
                "enum": [
                  "Allow",
                  "Before",
                  "After"
                ]
              },
              "cancelBehavior": {
                "default": "Block",
                "description": "The behavior to take when cancel is chosen from the popup.",
                "enum": [
                  "Block",
                  "SendRedacted"
                ]
              },
              "createTime": {
                "description": "Creation date of the object.",
                "format": "date-time",
                "readOnly": true,
                "type": "string"
              },
              "deanonymize": {
                "description": "If true, deanonymize the redacted data. This has no effects on streaming output.",
                "type": "boolean"
              },
              "description": {
                "description": "The description of the provider.",
                "type": "string"
              },
              "honorPriorDecision": {
                "description": "If true, it will wait on a prior popup and honor its decision. It only has\neffect if there is an existing popup being shown.",
                "type": "boolean"
              },
              "ignore": {
                "description": "If true, the analysis will run, but nothing will be logged.",
                "type": "boolean"
              },
              "importHash": {
                "description": "The hash of the structure used to compare with new import version.",
                "type": "string"
              },
              "importLabel": {
                "description": "The user-defined import label that allows the system to group resources from the\nsame import operation.",
                "type": "string"
              },
              "method": {
                "description": "The method to match.",
                "enum": [
                  "Post",
                  "Put",
                  "Patch",
                  "Get",
                  "Delete",
                  "Options",
                  "Head"
                ],
                "example": [
                  "Post"
                ]
              },
              "name": {
                "description": "The internal reference name of the object.",
                "example": "my-extractor",
                "type": "string"
              },
              "namespace": {
                "description": "The namespace of the object.",
                "readOnly": true,
                "type": "string"
              },
              "path": {
                "description": "A regular expression to match a URL path to log.",
                "example": [
                  "/api/v1",
                  "/v1/*/hello/*"
                ],
                "type": "string"
              },
              "propagate": {
                "default": true,
                "description": "Propagates the object to all child namespaces. This is always true.",
                "type": "boolean"
              },
              "script": {
                "description": "If not empty, use this lua code to run the extraction.",
                "type": "string"
              },
              "type": {
                "description": "The type of extractor.",
                "enum": [
                  "Input",
                  "Output"
                ],
                "example": "Input"
              },
              "updateTime": {
                "description": "Last update date of the object.",
                "format": "date-time",
                "readOnly": true,
                "type": "string"
              }
            },
            "required": [
              "method",
              "name",
              "path",
              "type"
            ],
            "type": "object"
          },
          "hosts": {
            "description": "Optional hosts to match. This is useful in case the provider has multiple hosts\nto discriminate which logger to use.",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "ref": {
            "description": "References a preexisting extractor definition.",
            "type": "string"
          }
        },
        "type": "object"
      },
      "type": "array"
    },
    "friendlyName": {
      "description": "Friendly Name of the provider.",
      "example": "OpenAI",
      "type": "string"
    },
    "hosts": {
      "description": "Hosts supported by the providers.",
      "items": {
        "description": "This is node definition.",
        "properties": {
          "disableFingerprintingResistance": {
            "description": "Disable Apex routines to try to mimic client's tls handshake signature. You\nprobably want this on.",
            "type": "boolean"
          },
          "name": {
            "description": "The hostname.",
            "example": "chat.openai.com",
            "type": "string"
          },
          "prefix": {
            "description": "URL prefix for additional matching.",
            "type": "string"
          },
          "proxyLabel": {
            "description": "The proxy label to use to exit to this host.",
            "example": "default",
            "type": "string"
          }
        },
        "required": [
          "name"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "icon": {
      "description": "The icon of the provider, base64 encoded.",
      "type": "string"
    },
    "importHash": {
      "description": "The hash of the structure used to compare with new import version.",
      "type": "string"
    },
    "importLabel": {
      "description": "The user-defined import label that allows the system to group resources from the\nsame import operation.",
      "type": "string"
    },
    "injectors": {
      "description": "Defines injection point for javascript snippet.",
      "items": {
        "description": "TODO.",
        "properties": {
          "delayXHRPatching": {
            "description": "Since JS world is the mess we all know, there are some cases when we must delay\nthe monkey patching of the XHR request.",
            "type": "boolean"
          },
          "hosts": {
            "description": "Optional hosts to match. This is useful in case the provider has multiple hosts\nto discriminate which logger to use.",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "method": {
            "description": "The method to match.",
            "enum": [
              "Post",
              "Put",
              "Patch",
              "Get",
              "Delete",
              "Options",
              "Head"
            ],
            "example": [
              "Post"
            ]
          },
          "path": {
            "description": "A regular expression to match a URL path to log.",
            "example": [
              "/api/v1",
              "/v1/*/hello/*"
            ],
            "type": "string"
          }
        },
        "required": [
          "method",
          "path"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "mappers": {
      "description": "List of user mappers.",
      "items": {
        "description": "TODO.",
        "properties": {
          "expiration": {
            "default": "1h",
            "description": "Set how long the data should be cached.",
            "type": "string"
          },
          "hosts": {
            "description": "Optional hosts to match. This is useful in case the provider has multiple hosts\nto discriminate which logger to use.",
            "items": {
              "type": "string"
            },
            "type": "array"
          },
          "method": {
            "description": "The method to match.",
            "enum": [
              "Post",
              "Put",
              "Patch",
              "Get",
              "Delete",
              "Options",
              "Head"
            ],
            "example": [
              "Post"
            ]
          },
          "name": {
            "description": "The name of the extractor. It will be used to identify which extractor was used\nduring an extraction.",
            "type": "string"
          },
          "path": {
            "description": "A regular expression to match a URL path to log.",
            "example": [
              "/api/v1",
              "/v1/*/hello/*"
            ],
            "type": "string"
          },
          "script": {
            "description": "If not empty, use this lua code to run the extraction.",
            "type": "string"
          }
        },
        "required": [
          "method",
          "path"
        ],
        "type": "object"
      },
      "type": "array"
    },
    "name": {
      "description": "Name of the provider.",
      "example": "openai",
      "type": "string"
    },
    "namespace": {
      "description": "The namespace of the object.",
      "readOnly": true,
      "type": "string"
    },
    "propagate": {
      "default": true,
      "description": "Propagates the object to all child namespaces. This is always true.",
      "type": "boolean"
    },
    "riskScore": {
      "description": "The latest risk score of the provider.",
      "type": "number"
    },
    "status": {
      "default": "Stable",
      "description": "The support status of the provider.",
      "enum": [
        "Stable",
        "Unstable"
      ]
    },
    "tokenSwap": {
      "description": "If true, consider the incoming calls to use an acuvity token and swap them using\nregistered providertokens.",
      "type": "boolean"
    },
    "trustedCA": {
      "description": "If set, additionally trust the Certificate Authorities from the PEM data. This\nis useful when working on a custom provider using a self signed CA chain.",
      "type": "string"
    },
    "updateTime": {
      "description": "Last update date of the object.",
      "format": "date-time",
      "readOnly": true,
      "type": "string"
    },
    "upstreamUnsecure": {
      "description": "If enabled, force the ustream scheme to be HTTP instead of https. Mostly use for\ndev purposes.",
      "type": "boolean"
    }
  },
  "required": [
    "category",
    "friendlyName",
    "name",
    "status"
  ]
}